Libforwardsec. A library for puncturable forward secure encryption.
============================


Dependencies
-----------------------------
* For math: 
	* relic (https://github.com/relic-toolkit/relic) 
	* gmp (assuming relic is configured to use it) 
* For serialization:
	*  cereal(https://github.com/USCiLab/cereal) 
* For testing:
	* Google test (https://code.google.com/p/googletest/) 
	

Build
----------------------------
This project builds with cmake.
    
    cd build/ 
    cmake ../
    make 
    make check # (optional) builds and runs tests.
    make bench # (optional) builds and runs benchmarks
    make install 

It is known to build and pass all tests on OSX 10.9.5  with Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn) 
and Ubuntu 14.04 with gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1) 


Note, Cmake supports a bunch of other build systems via "cmake -G 'generator name' ../"
Among them Ninja and project files for your favorite/
least favorite IDEs (xcode, eclipse,visualstudio, etc)

For a full list of supported build systems run:
cmake --help



 Installing  dependencies
----------------------------

# Relic (note, depends on gmp)
    #from a suitable directory
    git clone https://github.com/relic-toolkit/relic.git
    cd relic
    git checkout relic-toolkit-0.4.0 
    cmake -G "Unix Makefiles" -DCOMP="-O2 -funroll-loops -fomit-frame-pointer" -DARCH="X64"  -DRAND="UDEV" -DWITH="BN;DV;FP;FPX;EP;EPX;PP;PC;MD" -DCHECK=off -DVERBS=off -DDEBUG=on -DBENCH=0 -DTESTS=1 -DARITH=gmp -DFP_PRIME=256 -DFP_QNRES=off -DFP_METHD="BASIC;COMBA;COMBA;MONTY;LOWER;SLIDE" -DFPX_METHD="INTEG;INTEG;LAZYR" -DPP_METHD="LAZYR;OATEP"
    make 
    make install 
	
# GMP
Install using your package manager.
	
# Cereal
Cereal is a header only library.  Try your local package manager or 
    
    #from a suitable directory
    git clone https://github.com/USCiLab/cereal.git
    cd cereal
    git checkout v1.0.0
    cp -R ./include/* /usr/local/include/
 	
# Google test
    #from the root of the libforwardsec project
    git submodule init
    git submodule update

Android BUILD
0) Build gmp for android or download libgmp arm binary
1) build relic 

2)
make a standalone toolchain using clang and libc++
./make-standalone-toolchain.sh  --platform=android-21 --install-dir=/home/ian/android_standalone/ --ndk-dir=/home/ian/androidndk/android-ndk-r10d/ --arch=arm --system=linux-x86_64  --toolchain=arm-linux-androideabi-clang3.5 --stl=libc++
3)

 cmake -DCMAKE_TOOLCHAIN_FILE=../android.toolchain.cmake -DCMAKE_BUILD_TYPE=Release -DANDROID_ABI="armeabi-v7a with NEON" -DANDROID_STANDALONE_TOOLCHAIN=/home/ian/android_standalone/   ../
(GCC)

or (CLANG/LLVM)
ian@secdev:~/libforwardsec/build$ cmake -DCMAKE_TOOLCHAIN_FILE=../android.toolchain.cmake -DCMAKE_BUILD_TYPE=Release -DANDROID_ABI="armeabi-v7a with NEON" -DANDROID_STANDALONE_TOOLCHAIN=/home/ian/android_standalone/  -DANDROID_TOOLCHAIN_NAME=standalone-clang  ../


